/*
 * Academic License - for use in teaching, academic research, and meeting
 * course requirements at degree granting institutions only.  Not for
 * government, commercial, or other organizational use.
 *
 * Switching_Function.c
 *
 * Code generation for function 'Switching_Function'
 *
 */

/* Include files */
#include "Switching_Function.h"
#include "objfunSTM_S_energy_data.h"
#include "rt_nonfinite.h"
#include "mwmathutil.h"

/* Function Definitions */
real_T Switching_Function(const emlrtStack *sp, const real_T x[5],
                          const real_T p[5], real_T physical_Tmax,
                          real_T physical_c)
{
  emlrtStack b_st;
  emlrtStack st;
  real_T b_x;
  real_T t2;
  st.prev = sp;
  st.tls = sp->tls;
  b_st.prev = &st;
  b_st.tls = st.tls;
  /*  Computes switching Function and its derivatives */
  /*  Definition of the Switching function and its derivatives with evaluation
   * of the */
  /*  matlabFunction S_fun, S_x_fun, S_p_fun, S_xx_fun, S_pp_fun, S_xp_fun */
  /*  Input: */
  /*  x: state vector [NSTATEx1] */
  /*  p: costate vector [NSTATEx1] */
  /*  physical: structure of physical variables and functions */
  /*  Output: */
  /*  S: switching function */
  /*  Sd: switching function first derivatives */
  /*  Sdd: switching function second derivatives */
  st.site = &j_emlrtRSI;
  /* S_fun */
  /*     Ssym = S_fun(IN1,IN2,Tsym,CSYM,EPSsym) */
  /*     This function was generated by the Symbolic Math Toolbox version 9.2.
   */
  /*     01-Sep-2024 17:26:08 */
  t2 = 1.0 / physical_c;
  b_st.site = &k_emlrtRSI;
  b_x = p[2] * p[2] + p[3] * p[3];
  if (b_x < 0.0) {
    emlrtErrorWithMessageIdR2018a(
        &b_st, &e_emlrtRTEI, "Coder:toolbox:ElFunDomainError",
        "Coder:toolbox:ElFunDomainError", 3, 4, 4, "sqrt");
  }
  b_x = muDoubleScalarSqrt(b_x);
  return -physical_Tmax * ((t2 + p[4] * t2) - b_x / x[4]);
}

/* End of code generation (Switching_Function.c) */
